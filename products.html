<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - HomeDecor</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Loading Animation -->
    <div class="page-loading" id="pageLoading">
        <div class="loading-spinner"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo" onclick="window.location.href='index.html'" style="cursor: pointer;">
                    <h2>HomeDecor</h2>
                </div>
                <ul class="nav-menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html" class="active">Products</a></li>
                    <li><a href="categories.html">Categories</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
                <div class="nav-icons">
                    <div class="live-clock" id="liveClock"></div>
                    <div class="search-box">
                        <input type="text" placeholder="Search products..." id="searchInput">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="dark-mode-toggle" onclick="toggleDarkMode()" title="Toggle Dark Mode">
                        <i class="fas fa-moon" id="darkModeIcon"></i>
                    </div>
                    <div class="wishlist-icon" onclick="toggleWishlist()">
                        <i class="fas fa-heart"></i>
                        <span class="wishlist-count" id="wishlistCount">0</span>
                    </div>
                    <div class="cart-icon" onclick="toggleCart()">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cartCount">0</span>
                    </div>
                    <div class="user-icon" onclick="toggleUserMenu()">
                        <i class="fas fa-user"></i>
                        <div class="user-menu" id="userMenu">
                            <a href="admin.html"><i class="fas fa-cog"></i> Admin Panel</a>
                            <a href="login.html"><i class="fas fa-sign-in-alt"></i> Login</a>
                            <a href="register.html"><i class="fas fa-user-plus"></i> Register</a>
                            <a href="#" onclick="showProfile()"><i class="fas fa-user-circle"></i> Profile</a>
                            <a href="#" onclick="showComparison()"><i class="fas fa-balance-scale"></i> Compare Products</a>
                            <a href="#" onclick="showOrderTracking()"><i class="fas fa-truck"></i> Track Orders</a>
                        </div>
                    </div>
                </div>
                <div class="hamburger" onclick="toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>
    </header>

    <!-- Products Hero -->
    <section class="page-hero">
        <div class="container">
            <h1 class="text-reveal">
                <span>Our</span> <span>Products</span>
            </h1>
            <p class="fade-in">Discover our complete collection of premium home decoration items</p>
            <div class="breadcrumb fade-in">
                <a href="index.html">Home</a> <i class="fas fa-chevron-right"></i> <span>Products</span>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section class="products-page">
        <div class="container">
            <div class="products-header slide-in-left">
                <h2 class="text-reveal">
                    <span>All</span> <span>Products</span>
                </h2>
                <div class="products-controls">
                    <div class="filter-buttons stagger-animation">
                        <button class="filter-btn active hover-glow" onclick="filterProducts('all', this)">All</button>
                        <button class="filter-btn hover-glow" onclick="filterProducts('living-room', this)">Living Room</button>
                        <button class="filter-btn hover-glow" onclick="filterProducts('bedroom', this)">Bedroom</button>
                        <button class="filter-btn hover-glow" onclick="filterProducts('kitchen', this)">Kitchen</button>
                        <button class="filter-btn hover-glow" onclick="filterProducts('bathroom', this)">Bathroom</button>
                    </div>
                    <div class="sort-dropdown fade-in">
                        <select id="sortSelect" onchange="sortProducts(this.value)">
                            <option value="default">Sort by</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                            <option value="name">Name: A to Z</option>
                            <option value="newest">Newest First</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="products-grid" id="productsGrid">
                <!-- Products will be loaded dynamically -->
            </div>
            <div class="pagination" id="pagination">
                <!-- Pagination will be added here -->
            </div>
        </div>
    </section>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3><i class="fas fa-shopping-cart"></i> Shopping Cart</h3>
            <button class="close-cart" onclick="toggleCart()">&times;</button>
        </div>
        <div class="cart-items" id="cartItems"></div>
        <div class="cart-footer">
            <div class="cart-total">
                <strong>Total: $<span id="cartTotal">0.00</span></strong>
            </div>
            <button class="checkout-btn" onclick="proceedToCheckout()">
                <i class="fas fa-credit-card"></i> Proceed to Checkout
            </button>
        </div>
    </div>

    <!-- Wishlist Sidebar -->
    <div class="wishlist-sidebar" id="wishlistSidebar">
        <div class="wishlist-header">
            <h3><i class="fas fa-heart"></i> Wishlist</h3>
            <button class="close-wishlist" onclick="toggleWishlist()">&times;</button>
        </div>
        <div class="wishlist-items" id="wishlistItems"></div>
        <div class="wishlist-footer">
            <button class="btn btn-primary" onclick="addAllToCart()">
                <i class="fas fa-cart-plus"></i> Add All to Cart
            </button>
        </div>
    </div>



    <!-- Modals -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <!-- Weather Widget -->
    <div class="weather-widget" id="weatherWidget">
        <span class="weather-icon">‚òÄÔ∏è</span>
        <span class="weather-temp">72¬∞F</span>
    </div>

    <!-- Complete Working Cart & Wishlist System -->
    <script>
        // ===== COMPLETE WORKING CART, WISHLIST & PAYMENT SYSTEM =====
        
        // Sample products for the shop
        const products = [
            // Living Room Products
            {
                id: 1,
                title: "Modern Sofa Set",
                description: "Comfortable 3-seater sofa with premium fabric upholstery",
                price: 899.99,
                category: "living-room",
                image: "https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=400&h=300&fit=crop",
                badge: "Best Seller"
            },
            {
                id: 2,
                title: "Coffee Table",
                description: "Elegant wooden coffee table with storage compartments",
                price: 299.99,
                category: "living-room",
                image: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=300&fit=crop",
                badge: "New"
            },
            {
                id: 3,
                title: "Floor Lamp",
                description: "Contemporary floor lamp with adjustable brightness",
                price: 149.99,
                category: "living-room",
                image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop",
                badge: "Sale"
            },
            {
                id: 4,
                title: "Wall Art Set",
                description: "Set of 3 abstract canvas paintings for modern homes",
                price: 199.99,
                category: "living-room",
                image: "https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=400&h=300&fit=crop",
                badge: "Popular"
            },
            {
                id: 5,
                title: "Throw Pillows",
                description: "Set of 4 decorative throw pillows in various colors",
                price: 79.99,
                category: "living-room",
                image: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=300&fit=crop"
            },
            {
                id: 6,
                title: "Area Rug",
                description: "Large Persian-style area rug for living spaces",
                price: 399.99,
                category: "living-room",
                image: "https://images.unsplash.com/photo-1506439773649-6e0eb8cfb237?w=400&h=300&fit=crop"
            },

            // Bedroom Products
            {
                id: 7,
                title: "Bed Frame",
                description: "Queen size wooden bed frame with headboard",
                price: 599.99,
                category: "bedroom",
                image: "https://images.unsplash.com/photo-1540932239986-30128078f3c5?w=400&h=300&fit=crop",
                badge: "Best Seller"
            },
            {
                id: 8,
                title: "Nightstand",
                description: "Modern nightstand with drawer and open shelf",
                price: 129.99,
                category: "bedroom",
                image: "https://images.unsplash.com/photo-1616486338812-3dadae4b4ace?w=400&h=300&fit=crop"
            },
            {
                id: 9,
                title: "Table Lamp",
                description: "Bedside table lamp with fabric shade",
                price: 89.99,
                category: "bedroom",
                image: "https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?w=400&h=300&fit=crop"
            },
            {
                id: 10,
                title: "Wardrobe",
                description: "Large wardrobe with mirror and multiple compartments",
                price: 799.99,
                category: "bedroom",
                image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=300&fit=crop",
                badge: "New"
            },
            {
                id: 11,
                title: "Bedding Set",
                description: "Luxury cotton bedding set with pillowcases",
                price: 159.99,
                category: "bedroom",
                image: "https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=400&h=300&fit=crop"
            },
            {
                id: 12,
                title: "Dresser",
                description: "6-drawer dresser with modern handles",
                price: 449.99,
                category: "bedroom",
                image: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=300&fit=crop"
            },

            // Kitchen Products
            {
                id: 13,
                title: "Bar Stools",
                description: "Set of 2 adjustable bar stools with back support",
                price: 199.99,
                category: "kitchen",
                image: "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=400&h=300&fit=crop",
                badge: "Popular"
            },
            {
                id: 14,
                title: "Kitchen Island",
                description: "Mobile kitchen island with storage and wheels",
                price: 699.99,
                category: "kitchen",
                image: "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400&h=300&fit=crop",
                badge: "Best Seller"
            },
            {
                id: 15,
                title: "Pendant Lights",
                description: "Set of 3 modern pendant lights for kitchen island",
                price: 249.99,
                category: "kitchen",
                image: "https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=400&h=300&fit=crop"
            },
            {
                id: 16,
                title: "Spice Rack",
                description: "Wall-mounted spice rack with 20 glass jars",
                price: 89.99,
                category: "kitchen",
                image: "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=400&h=300&fit=crop"
            },
            {
                id: 17,
                title: "Kitchen Cart",
                description: "Rolling kitchen cart with wine storage",
                price: 299.99,
                category: "kitchen",
                image: "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400&h=300&fit=crop",
                badge: "Sale"
            },
            {
                id: 18,
                title: "Cutting Board Set",
                description: "Bamboo cutting board set with different sizes",
                price: 49.99,
                category: "kitchen",
                image: "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=400&h=300&fit=crop"
            },

            // Bathroom Products
            {
                id: 19,
                title: "Vanity Mirror",
                description: "LED-lit vanity mirror with touch controls",
                price: 199.99,
                category: "bathroom",
                image: "https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=400&h=300&fit=crop",
                badge: "New"
            },
            {
                id: 20,
                title: "Towel Rack",
                description: "Wall-mounted towel rack with multiple bars",
                price: 79.99,
                category: "bathroom",
                image: "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=400&h=300&fit=crop"
            },
            {
                id: 21,
                title: "Shower Curtain",
                description: "Waterproof shower curtain with modern pattern",
                price: 39.99,
                category: "bathroom",
                image: "https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=400&h=300&fit=crop"
            },
            {
                id: 22,
                title: "Bath Mat Set",
                description: "Non-slip bath mat set in various sizes",
                price: 59.99,
                category: "bathroom",
                image: "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=400&h=300&fit=crop"
            },
            {
                id: 23,
                title: "Storage Cabinet",
                description: "Over-toilet storage cabinet with shelves",
                price: 149.99,
                category: "bathroom",
                image: "https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=400&h=300&fit=crop",
                badge: "Popular"
            },
            {
                id: 24,
                title: "Soap Dispenser Set",
                description: "Automatic soap dispenser with matching accessories",
                price: 89.99,
                category: "bathroom",
                image: "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=400&h=300&fit=crop"
            }
        ];

        // Cart and Wishlist Storage
        let cart = JSON.parse(localStorage.getItem('homeDecorCart')) || [];
        let wishlist = JSON.parse(localStorage.getItem('homeDecorWishlist')) || [];

        // Save functions
        function saveCart() {
            localStorage.setItem('homeDecorCart', JSON.stringify(cart));
        }

        function saveWishlist() {
            localStorage.setItem('homeDecorWishlist', JSON.stringify(wishlist));
        }

        // Update cart count in header
        function updateCartCount() {
            const cartCount = document.getElementById('cartCount');
            if (cartCount) {
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                cartCount.textContent = totalItems;
            }
        }

        // Update wishlist count in header
        function updateWishlistCount() {
            const wishlistCount = document.getElementById('wishlistCount');
            if (wishlistCount) {
                wishlistCount.textContent = wishlist.length;
            }
        }

        // Update cart total
        function updateCartTotal() {
            const cartTotal = document.getElementById('cartTotal');
            if (cartTotal) {
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                cartTotal.textContent = total.toFixed(2);
            }
        }

        // Update cart items display
        function updateCartItems() {
            const cartItems = document.getElementById('cartItems');
            if (!cartItems) return;
            
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="empty-cart">
                        <i class="fas fa-shopping-cart fa-3x"></i>
                        <h3>Your cart is empty</h3>
                        <p>Add some products to get started!</p>
                    </div>
                `;
                return;
            }
            
            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.title}" loading="lazy">
                    <div class="cart-item-info">
                        <h4 class="cart-item-title">${item.title}</h4>
                        <div class="cart-item-price">$${item.price.toFixed(2)}</div>
                        <div class="quantity-controls">
                            <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">
                                <i class="fas fa-minus"></i>
                            </button>
                            <span class="quantity">${item.quantity}</span>
                            <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="remove-btn" onclick="removeFromCart(${item.id})" title="Remove item">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });
        }

        // Update wishlist items display
        function updateWishlistItems() {
            const wishlistItems = document.getElementById('wishlistItems');
            if (!wishlistItems) return;
            
            wishlistItems.innerHTML = '';
            
            if (wishlist.length === 0) {
                wishlistItems.innerHTML = `
                    <div class="empty-wishlist">
                        <i class="fas fa-heart fa-3x"></i>
                        <h3>Your wishlist is empty</h3>
                        <p>Save products you love for later!</p>
                    </div>
                `;
                return;
            }
            
            wishlist.forEach(item => {
                const wishlistItem = document.createElement('div');
                wishlistItem.className = 'wishlist-item';
                wishlistItem.innerHTML = `
                    <img src="${item.image}" alt="${item.title}" loading="lazy">
                    <div class="wishlist-item-info">
                        <h4 class="wishlist-item-title">${item.title}</h4>
                        <div class="wishlist-item-price">$${item.price.toFixed(2)}</div>
                        <div class="wishlist-actions">
                            <button class="btn btn-primary btn-sm" onclick="addToCart(${item.id})">
                                <i class="fas fa-cart-plus"></i> Add to Cart
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="removeFromWishlist(${item.id})">
                                <i class="fas fa-trash"></i> Remove
                            </button>
                        </div>
                    </div>
                `;
                wishlistItems.appendChild(wishlistItem);
            });
        }

        // Add to cart function
        function addToCart(productId) {
            console.log('Adding to cart:', productId);
            
            // Find product from products array
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('‚ùå Product not found!', 'error');
                return;
            }
            
            // Check if product already in cart
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
                showNotification(`üõí Added another ${product.title} to cart!`, 'success');
            } else {
                cart.push({
                    id: product.id,
                    title: product.title,
                    price: product.price,
                    image: product.image,
                    quantity: 1
                });
                showNotification(`üõí ${product.title} added to cart!`, 'success');
            }
            
            updateCartUI();
            saveCart();
        }

        // Add to wishlist function
        function toggleWishlistItem(productId) {
            console.log('Toggling wishlist:', productId);
            
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('‚ùå Product not found!', 'error');
                return;
            }
            
            const existingIndex = wishlist.findIndex(item => item.id === productId);
            
            if (existingIndex > -1) {
                wishlist.splice(existingIndex, 1);
                showNotification(`üíî ${product.title} removed from wishlist!`, 'info');
            } else {
                wishlist.push({
                    id: product.id,
                    title: product.title,
                    price: product.price,
                    image: product.image
                });
                showNotification(`‚ù§Ô∏è ${product.title} added to wishlist!`, 'success');
            }
            
            updateWishlistUI();
            saveWishlist();
        }

        // Remove from cart
        function removeFromCart(productId) {
            const itemIndex = cart.findIndex(item => item.id === productId);
            if (itemIndex > -1) {
                const item = cart[itemIndex];
                cart.splice(itemIndex, 1);
                showNotification(`üóëÔ∏è ${item.title} removed from cart!`, 'info');
                updateCartUI();
                saveCart();
            }
        }

        // Remove from wishlist
        function removeFromWishlist(productId) {
            const itemIndex = wishlist.findIndex(item => item.id === productId);
            if (itemIndex > -1) {
                const item = wishlist[itemIndex];
                wishlist.splice(itemIndex, 1);
                showNotification(`üíî ${item.title} removed from wishlist!`, 'info');
                updateWishlistUI();
                saveWishlist();
            }
        }

        // Update quantity in cart
        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (!item) return;
            
            item.quantity += change;
            
            if (item.quantity <= 0) {
                removeFromCart(productId);
            } else {
                updateCartUI();
                saveCart();
            }
        }

        // Update all cart UI elements
        function updateCartUI() {
            updateCartCount();
            updateCartItems();
            updateCartTotal();
        }

        // Update all wishlist UI elements
        function updateWishlistUI() {
            updateWishlistCount();
            updateWishlistItems();
        }

        // Toggle cart sidebar
        function toggleCart() {
            const cartSidebar = document.getElementById('cartSidebar');
            const overlay = document.querySelector('.cart-overlay') || createOverlay('cart');
            
            if (cartSidebar.classList.contains('open')) {
                cartSidebar.classList.remove('open');
                overlay.classList.remove('show');
                document.body.classList.remove('modal-open');
            } else {
                cartSidebar.classList.add('open');
                overlay.classList.add('show');
                document.body.classList.add('modal-open');
                updateCartUI();
            }
        }

        // Toggle wishlist sidebar
        function toggleWishlist() {
            const wishlistSidebar = document.getElementById('wishlistSidebar');
            const overlay = document.querySelector('.wishlist-overlay') || createOverlay('wishlist');
            
            if (wishlistSidebar.classList.contains('open')) {
                wishlistSidebar.classList.remove('open');
                overlay.classList.remove('show');
                document.body.classList.remove('modal-open');
            } else {
                wishlistSidebar.classList.add('open');
                overlay.classList.add('show');
                document.body.classList.add('modal-open');
                updateWishlistUI();
            }
        }

        // Create overlay for modals
        function createOverlay(type) {
            let overlay = document.querySelector(`.${type}-overlay`);
            if (!overlay) {
                overlay = document.createElement('div');
                overlay.className = `overlay ${type}-overlay`;
                overlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.5);
                    z-index: 9999;
                    opacity: 0;
                    visibility: hidden;
                    transition: all 0.3s ease;
                `;
                overlay.onclick = () => {
                    if (type === 'cart') toggleCart();
                    if (type === 'wishlist') toggleWishlist();
                };
                document.body.appendChild(overlay);
            }
            return overlay;
        }

        // Notification system
        function showNotification(message, type = 'info', duration = 3000) {
            // Remove existing notifications
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notification => notification.remove());

            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <span class="notification-message">${message}</span>
                    <button class="notification-close" onclick="this.parentElement.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;

            // Add notification styles
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--bg-primary);
                color: var(--text-primary);
                border: 1px solid var(--border-color);
                border-radius: 10px;
                padding: 1rem 1.5rem;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 10000;
                transform: translateX(400px);
                transition: all 0.3s ease;
                max-width: 300px;
                backdrop-filter: blur(10px);
            `;

            // Type-specific styling
            if (type === 'success') {
                notification.style.borderLeft = '4px solid #22c55e';
            } else if (type === 'error') {
                notification.style.borderLeft = '4px solid #ef4444';
            } else if (type === 'warning') {
                notification.style.borderLeft = '4px solid #f59e0b';
            } else {
                notification.style.borderLeft = '4px solid #3b82f6';
            }

            // Add to page
            document.body.appendChild(notification);

            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);

            // Auto remove
            setTimeout(() => {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 300);
            }, duration);
        }

        // Display products
        function displayProducts(productsToShow = products) {
            const productsGrid = document.getElementById('productsGrid');
            productsGrid.innerHTML = '';

            productsToShow.forEach(product => {
                const productCard = createProductCard(product);
                productsGrid.appendChild(productCard);
            });
        }

        // Create product card
        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card fade-in-up';
            card.setAttribute('data-category', product.category);
            card.setAttribute('data-price', product.price);
            card.setAttribute('data-name', product.title);
            card.setAttribute('data-id', product.id);

            card.innerHTML = `
                <div class="product-image">
                    <img src="${product.image}" alt="${product.title}" loading="lazy">
                    ${product.badge ? `<div class="product-badge">${product.badge}</div>` : ''}
                </div>
                <div class="product-info">
                    <h3 class="product-title">${product.title}</h3>
                    <p class="product-description">${product.description}</p>
                    <div class="product-price">$${product.price.toFixed(2)}</div>
                    <div class="product-actions">
                        <button class="btn btn-primary" onclick="addToCart(${product.id})">
                            <i class="fas fa-cart-plus"></i> Add to Cart
                        </button>
                        <button class="btn btn-secondary" onclick="viewProduct(${product.id})">
                            <i class="fas fa-eye"></i> View
                        </button>
                        <button class="btn btn-wishlist" onclick="toggleWishlistItem(${product.id})" title="Add to Wishlist">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                </div>
            `;

            return card;
        }

        // Filter products
        function filterProducts(category, buttonElement = null) {
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(btn => btn.classList.remove('active'));
            
            // Find the clicked button or use the first matching button
            if (buttonElement) {
                buttonElement.classList.add('active');
            } else {
                const activeButton = document.querySelector(`[onclick*="${category}"]`);
                if (activeButton) activeButton.classList.add('active');
            }

            let filteredProducts;
            if (category === 'all') {
                filteredProducts = products;
            } else {
                filteredProducts = products.filter(product => product.category === category);
            }

            displayProducts(filteredProducts);
        }

        // View product details
        function viewProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML = `
                <div class="product-detail">
                    <div class="product-detail-image">
                        <img src="${product.image}" alt="${product.title}">
                    </div>
                    <div class="product-detail-info">
                        <h2>${product.title}</h2>
                        <p class="product-detail-description">${product.description}</p>
                        <div class="product-detail-price">$${product.price.toFixed(2)}</div>
                        <div class="product-detail-actions">
                            <button class="btn btn-primary" onclick="addToCart(${product.id}); closeModal();">
                                <i class="fas fa-cart-plus"></i> Add to Cart
                            </button>
                            <button class="btn btn-secondary" onclick="toggleWishlistItem(${product.id});">
                                <i class="fas fa-heart"></i> Add to Wishlist
                            </button>
                        </div>
                        <div class="product-features">
                            <h4>Features:</h4>
                            <ul>
                                <li>High-quality materials</li>
                                <li>Modern design</li>
                                <li>Easy assembly</li>
                                <li>1-year warranty</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('productModal').style.display = 'block';
        }

        // Close modal
        function closeModal() {
            const modal = document.getElementById('productModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Basic functions for header functionality
        function toggleUserMenu() {
            const userMenu = document.getElementById('userMenu');
            if (userMenu) {
                userMenu.classList.toggle('show');
            }
        }

        function toggleMobileMenu() {
            const navMenu = document.querySelector('.nav-menu');
            const hamburger = document.querySelector('.hamburger');
            if (navMenu && hamburger) {
                navMenu.classList.toggle('active');
                hamburger.classList.toggle('active');
            }
        }

        function toggleDarkMode() {
            const body = document.body;
            const darkModeIcon = document.getElementById('darkModeIcon');
            const currentTheme = body.getAttribute('data-theme');

            if (currentTheme === 'dark') {
                body.setAttribute('data-theme', 'light');
                if (darkModeIcon) darkModeIcon.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
                showNotification('‚òÄÔ∏è Light mode activated!', 'success');
            } else {
                body.setAttribute('data-theme', 'dark');
                if (darkModeIcon) darkModeIcon.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
                showNotification('üåô Dark mode activated!', 'success');
            }
        }

        function showProfile() {
            showNotification('üë§ Profile feature coming soon!', 'info');
        }

        function showComparison() {
            showNotification('‚öñÔ∏è Product comparison feature coming soon!', 'info');
        }

        function showOrderTracking() {
            showNotification('üì¶ Order tracking feature coming soon!', 'info');
        }

        function proceedToCheckout() {
            if (cart.length === 0) {
                showNotification('üõí Your cart is empty! Add some products first.', 'error');
                return;
            }
            showNotification('üöÄ Checkout feature coming soon!', 'info');
        }

        function addAllToCart() {
            if (wishlist.length === 0) {
                showNotification('‚ù§Ô∏è Your wishlist is empty!', 'error');
                return;
            }
            
            wishlist.forEach(item => {
                addToCart(item.id);
            });
            
            wishlist = [];
            updateWishlistUI();
            saveWishlist();
            showNotification('üõí All wishlist items added to cart!', 'success');
        }

        // Sort products function
        function sortProducts(sortType) {
            const productsGrid = document.getElementById('productsGrid');
            const products = Array.from(productsGrid.children);
            
            products.sort((a, b) => {
                switch(sortType) {
                    case 'price-low':
                        return parseFloat(a.dataset.price) - parseFloat(b.dataset.price);
                    case 'price-high':
                        return parseFloat(b.dataset.price) - parseFloat(a.dataset.price);
                    case 'name':
                        return a.dataset.name.localeCompare(b.dataset.name);
                    case 'newest':
                        return parseInt(b.dataset.id) - parseInt(a.dataset.id);
                    default:
                        return 0;
                }
            });
            
            // Re-append sorted products with animation
            products.forEach((product, index) => {
                product.style.animation = 'none';
                product.style.animationDelay = `${index * 0.1}s`;
                setTimeout(() => {
                    product.style.animation = 'productSlideUp 0.6s ease-out forwards';
                }, 50);
                productsGrid.appendChild(product);
            });
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Initializing products page...');
            
            // Hide loading animation
            const loading = document.getElementById('pageLoading');
            if (loading) {
                loading.classList.add('hidden');
                setTimeout(() => loading.remove(), 500);
            }

            // Initialize dark mode
            const savedTheme = localStorage.getItem('theme');
            const body = document.body;
            const darkModeIcon = document.getElementById('darkModeIcon');

            if (savedTheme === 'dark') {
                body.setAttribute('data-theme', 'dark');
                if (darkModeIcon) darkModeIcon.className = 'fas fa-sun';
            } else {
                body.setAttribute('data-theme', 'light');
                if (darkModeIcon) darkModeIcon.className = 'fas fa-moon';
            }
            
            // Initialize cart and wishlist
            updateCartUI();
            updateWishlistUI();
            
            // Display products
            displayProducts();
            
            // Get category from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const category = urlParams.get('category');
            
            // Filter products based on URL parameter
            if (category) {
                setTimeout(() => {
                    filterProducts(category);
                    // Update active button
                    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                    const activeBtn = document.querySelector(`[onclick*="${category}"]`);
                    if (activeBtn) activeBtn.classList.add('active');
                }, 500);
            }
            
            // Show welcome message
            setTimeout(() => {
                showNotification('üõçÔ∏è Welcome to our products page!', 'success');
            }, 1000);
        });

        // ===== LIVE CLOCK FUNCTIONALITY =====
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            });
            
            const clockElement = document.getElementById('liveClock');
            if (clockElement) {
                clockElement.innerHTML = `<i class="fas fa-clock"></i> ${timeString}`;
            }
        }

        // Initialize clock
        updateClock();
        setInterval(updateClock, 1000);

        // Make functions globally available
        window.addToCart = addToCart;
        window.toggleWishlistItem = toggleWishlistItem;
        window.toggleCart = toggleCart;
        window.toggleWishlist = toggleWishlist;
        window.filterProducts = filterProducts;
        window.sortProducts = sortProducts;
        window.viewProduct = viewProduct;
        window.closeModal = closeModal;
        window.toggleUserMenu = toggleUserMenu;
        window.toggleMobileMenu = toggleMobileMenu;
        window.toggleDarkMode = toggleDarkMode;
        window.showProfile = showProfile;
        window.showComparison = showComparison;
        window.showOrderTracking = showOrderTracking;
        window.proceedToCheckout = proceedToCheckout;
        window.addAllToCart = addAllToCart;
    </script>
</body>
</html>